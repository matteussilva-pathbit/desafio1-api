2025-09-08 00:37:46.474 -03:00 [INF] User profile is available. Using 'C:\Users\OBERDAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 00:37:46.567 -03:00 [INF] Now listening on: http://localhost:5297
2025-09-08 00:37:46.568 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 00:37:46.568 -03:00 [INF] Hosting environment: Development
2025-09-08 00:37:46.568 -03:00 [INF] Content root path: C:\Users\OBERDAN\Desktop\DESAFIO1\src\API
2025-09-08 00:38:28.514 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/index.css - null null
2025-09-08 00:38:28.514 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/swagger-ui.css - null null
2025-09-08 00:38:28.514 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/swagger-ui-bundle.js - null null
2025-09-08 00:38:28.559 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/swagger-ui.css - 304 null null 46.2547ms
2025-09-08 00:38:28.559 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/index.css - 304 null null 46.4673ms
2025-09-08 00:38:28.559 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/swagger-ui-bundle.js - 304 null null 46.2604ms
2025-09-08 00:38:28.583 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/index.js - null null
2025-09-08 00:38:28.583 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/swagger-ui-standalone-preset.js - null null
2025-09-08 00:38:28.596 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/swagger-ui-standalone-preset.js - 304 null null 13.2696ms
2025-09-08 00:38:28.638 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/index.js - 200 null application/javascript;charset=utf-8 55.0837ms
2025-09-08 00:38:28.715 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 00:38:28.796 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.8535ms
2025-09-08 00:39:52.865 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 00:39:52.871 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 6.3125ms
2025-09-08 00:40:52.554 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/signup - application/json 111
2025-09-08 00:40:52.558 -03:00 [WRN] Failed to determine the https port for redirect.
2025-09-08 00:40:52.577 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 00:40:52.589 -03:00 [INF] Route matched with {action = "SignUp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignUp(SignUpRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 00:40:53.096 -03:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-08 00:40:57.311 -03:00 [ERR] An error occurred using the connection to database 'desafio_db' on server 'tcp://localhost:5433'.
2025-09-08 00:40:57.316 -03:00 [INF] Executed action API.Controllers.AuthController.SignUp (Api) in 4725.0644ms
2025-09-08 00:40:57.316 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 00:40:57.318 -03:00 [ERR] HTTP POST /api/auth/signup responded 500 in 4760.8792 ms
Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at Infrastructure.Data.UnitOfWork.BeginTransactionAsync(CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Data\UnitOfWork.cs:line 16
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 44
   at API.Controllers.AuthController.SignUp(SignUpRequest req, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AuthController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 00:40:57.333 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at Infrastructure.Data.UnitOfWork.BeginTransactionAsync(CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Data\UnitOfWork.cs:line 16
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 44
   at API.Controllers.AuthController.SignUp(SignUpRequest req, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AuthController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 00:40:57.342 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/signup - 500 null text/plain; charset=utf-8 4787.7701ms
2025-09-08 00:41:34.300 -03:00 [INF] User profile is available. Using 'C:\Users\OBERDAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 00:41:34.387 -03:00 [INF] Now listening on: http://localhost:5297
2025-09-08 00:41:34.388 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 00:41:34.388 -03:00 [INF] Hosting environment: Development
2025-09-08 00:41:34.389 -03:00 [INF] Content root path: C:\Users\OBERDAN\Desktop\DESAFIO1\src\API
2025-09-08 00:41:44.421 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 00:41:44.527 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 106.9954ms
2025-09-08 00:42:54.549 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/signup - application/json 119
2025-09-08 00:42:54.555 -03:00 [WRN] Failed to determine the https port for redirect.
2025-09-08 00:42:54.577 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 00:42:54.588 -03:00 [INF] Route matched with {action = "SignUp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignUp(SignUpRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 00:42:54.953 -03:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-08 00:42:59.139 -03:00 [ERR] An error occurred using the connection to database 'desafio_db' on server 'tcp://localhost:5433'.
2025-09-08 00:42:59.143 -03:00 [INF] Executed action API.Controllers.AuthController.SignUp (Api) in 4553.4558ms
2025-09-08 00:42:59.143 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 00:42:59.145 -03:00 [ERR] HTTP POST /api/auth/signup responded 500 in 4590.3193 ms
Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at Infrastructure.Data.UnitOfWork.BeginTransactionAsync(CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Data\UnitOfWork.cs:line 16
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 44
   at API.Controllers.AuthController.SignUp(SignUpRequest req, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AuthController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 00:42:59.158 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(IsolationLevel isolationLevel, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.BeginTransactionAsync(CancellationToken cancellationToken)
   at Infrastructure.Data.UnitOfWork.BeginTransactionAsync(CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Data\UnitOfWork.cs:line 16
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 44
   at API.Controllers.AuthController.SignUp(SignUpRequest req, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AuthController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 00:42:59.173 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/signup - 500 null text/plain; charset=utf-8 4623.6545ms
2025-09-08 00:43:40.259 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 00:43:40.267 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 7.5042ms
2025-09-08 00:43:44.464 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/dev/seed-admin - null 0
2025-09-08 00:43:44.465 -03:00 [INF] Executing endpoint 'API.Controllers.AdminSeedController.Seed (Api)'
2025-09-08 00:43:44.472 -03:00 [INF] Route matched with {action = "Seed", controller = "AdminSeed"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Seed(System.Threading.CancellationToken) on controller API.Controllers.AdminSeedController (Api).
2025-09-08 00:43:48.807 -03:00 [ERR] An error occurred using the connection to database 'desafio_db' on server 'tcp://localhost:5433'.
2025-09-08 00:43:48.816 -03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 00:43:48.817 -03:00 [INF] Executed action API.Controllers.AdminSeedController.Seed (Api) in 4344.5627ms
2025-09-08 00:43:48.818 -03:00 [INF] Executed endpoint 'API.Controllers.AdminSeedController.Seed (Api)'
2025-09-08 00:43:48.818 -03:00 [ERR] HTTP POST /dev/seed-admin responded 500 in 4353.4653 ms
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Infrastructure.Seed.DbSeeder.SeedAdminAsync(IUserRepository users, ICustomerRepository customers, IUnitOfWork uow, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Seed\DbSeeder.cs:line 13
   at API.Controllers.AdminSeedController.Seed(CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AdminSeedController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 00:43:48.820 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Infrastructure.Seed.DbSeeder.SeedAdminAsync(IUserRepository users, ICustomerRepository customers, IUnitOfWork uow, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Seed\DbSeeder.cs:line 13
   at API.Controllers.AdminSeedController.Seed(CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AdminSeedController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 00:43:48.823 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/dev/seed-admin - 500 null text/plain; charset=utf-8 4359.4039ms
2025-09-08 09:53:21.168 -03:00 [INF] User profile is available. Using 'C:\Users\OBERDAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:53:21.264 -03:00 [INF] Now listening on: http://localhost:5000
2025-09-08 09:53:21.265 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:53:21.266 -03:00 [INF] Hosting environment: Production
2025-09-08 09:53:21.266 -03:00 [INF] Content root path: C:\Users\OBERDAN\Desktop\DESAFIO1\src\API
2025-09-08 09:54:23.337 -03:00 [INF] User profile is available. Using 'C:\Users\OBERDAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 09:54:23.433 -03:00 [INF] Now listening on: http://localhost:5297
2025-09-08 09:54:23.434 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 09:54:23.434 -03:00 [INF] Hosting environment: Development
2025-09-08 09:54:23.434 -03:00 [INF] Content root path: C:\Users\OBERDAN\Desktop\DESAFIO1\src\API
2025-09-08 09:54:41.138 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 09:54:41.276 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 138.4677ms
2025-09-08 09:54:49.261 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/dev/seed-admin - null 0
2025-09-08 09:54:49.267 -03:00 [WRN] Failed to determine the https port for redirect.
2025-09-08 09:54:49.294 -03:00 [INF] Executing endpoint 'API.Controllers.AdminSeedController.Seed (Api)'
2025-09-08 09:54:49.312 -03:00 [INF] Route matched with {action = "Seed", controller = "AdminSeed"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Seed(System.Threading.CancellationToken) on controller API.Controllers.AdminSeedController (Api).
2025-09-08 09:54:49.829 -03:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-08 09:54:54.248 -03:00 [ERR] An error occurred using the connection to database 'desafio_db' on server 'tcp://localhost:5433'.
2025-09-08 09:54:54.261 -03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Infrastructure.Data.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-08 09:54:54.266 -03:00 [INF] Executed action API.Controllers.AdminSeedController.Seed (Api) in 4951.8022ms
2025-09-08 09:54:54.266 -03:00 [INF] Executed endpoint 'API.Controllers.AdminSeedController.Seed (Api)'
2025-09-08 09:54:54.268 -03:00 [ERR] HTTP POST /dev/seed-admin responded 500 in 5001.2240 ms
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Infrastructure.Seed.DbSeeder.SeedAdminAsync(IUserRepository users, ICustomerRepository customers, IUnitOfWork uow, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Seed\DbSeeder.cs:line 13
   at API.Controllers.AdminSeedController.Seed(CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AdminSeedController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 09:54:54.278 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5433
 ---> System.Net.Sockets.SocketException (10061): Nenhuma conexão pôde ser feita porque a máquina de destino as recusou ativamente.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Infrastructure.Seed.DbSeeder.SeedAdminAsync(IUserRepository users, ICustomerRepository customers, IUnitOfWork uow, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Seed\DbSeeder.cs:line 13
   at API.Controllers.AdminSeedController.Seed(CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AdminSeedController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 09:54:54.291 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/dev/seed-admin - 500 null text/plain; charset=utf-8 5030.2847ms
2025-09-08 10:34:55.229 -03:00 [INF] User profile is available. Using 'C:\Users\OBERDAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 10:34:55.318 -03:00 [INF] Now listening on: http://localhost:5297
2025-09-08 10:34:55.319 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 10:34:55.319 -03:00 [INF] Hosting environment: Development
2025-09-08 10:34:55.319 -03:00 [INF] Content root path: C:\Users\OBERDAN\Desktop\DESAFIO1\src\API
2025-09-08 10:35:13.556 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 10:35:13.662 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 107.5352ms
2025-09-08 10:35:17.878 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/dev/seed-admin - null 0
2025-09-08 10:35:17.884 -03:00 [WRN] Failed to determine the https port for redirect.
2025-09-08 10:35:17.902 -03:00 [INF] Executing endpoint 'API.Controllers.AdminSeedController.Seed (Api)'
2025-09-08 10:35:17.914 -03:00 [INF] Route matched with {action = "Seed", controller = "AdminSeed"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Seed(System.Threading.CancellationToken) on controller API.Controllers.AdminSeedController (Api).
2025-09-08 10:35:18.281 -03:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-08 10:35:18.660 -03:00 [INF] Executed DbCommand (32ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-09-08 10:35:18.707 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 10:35:18.716 -03:00 [INF] Executed action API.Controllers.AdminSeedController.Seed (Api) in 801.017ms
2025-09-08 10:35:18.717 -03:00 [INF] Executed endpoint 'API.Controllers.AdminSeedController.Seed (Api)'
2025-09-08 10:35:18.719 -03:00 [INF] HTTP POST /dev/seed-admin responded 200 in 835.3916 ms
2025-09-08 10:35:18.725 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/dev/seed-admin - 200 null application/json; charset=utf-8 847.3624ms
2025-09-08 10:35:42.141 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 55
2025-09-08 10:35:42.143 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 10:35:42.146 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:35:42.206 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 10:35:42.214 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 10:35:42.225 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 10:35:42.226 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 79.316ms
2025-09-08 10:35:42.226 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 10:35:42.226 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 84.4813 ms
2025-09-08 10:35:42.226 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 85.8118ms
2025-09-08 10:37:55.936 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/products - application/json 63
2025-09-08 10:37:55.970 -03:00 [INF] Executing endpoint 'API.Controllers.ProductsController.Create (Api)'
2025-09-08 10:37:55.972 -03:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateProductRequest, System.Threading.CancellationToken) on controller API.Controllers.ProductsController (Api).
2025-09-08 10:37:56.061 -03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Products" ("Id", "Nome", "Preco", "QuantityAvailable")
VALUES (@p0, @p1, @p2, @p3);
2025-09-08 10:37:56.068 -03:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType3`1[[System.Guid, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 10:37:56.081 -03:00 [INF] Executed action API.Controllers.ProductsController.Create (Api) in 108.5108ms
2025-09-08 10:37:56.081 -03:00 [INF] Executed endpoint 'API.Controllers.ProductsController.Create (Api)'
2025-09-08 10:37:56.081 -03:00 [INF] HTTP POST /api/products responded 201 in 144.6662 ms
2025-09-08 10:37:56.081 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/products - 201 null application/json; charset=utf-8 145.5691ms
2025-09-08 10:38:30.370 -03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5297/api/products/6ac2aa32-8512-4a8c-b0a4-6ce62150c1d2/price - application/json 20
2025-09-08 10:38:30.372 -03:00 [INF] Executing endpoint 'API.Controllers.ProductsController.UpdatePrice (Api)'
2025-09-08 10:38:30.377 -03:00 [INF] Route matched with {action = "UpdatePrice", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePrice(System.Guid, UpdatePriceRequest, System.Threading.CancellationToken) on controller API.Controllers.ProductsController (Api).
2025-09-08 10:38:30.393 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Nome", p."Preco", p."QuantityAvailable"
FROM "Products" AS p
WHERE p."Id" = @__id_0
LIMIT 1
2025-09-08 10:38:30.406 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?', @p1='?' (DbType = Decimal), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Products" SET "Nome" = @p0, "Preco" = @p1, "QuantityAvailable" = @p2
WHERE "Id" = @p3;
2025-09-08 10:38:30.408 -03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-08 10:38:30.408 -03:00 [INF] Executed action API.Controllers.ProductsController.UpdatePrice (Api) in 31.4215ms
2025-09-08 10:38:30.408 -03:00 [INF] Executed endpoint 'API.Controllers.ProductsController.UpdatePrice (Api)'
2025-09-08 10:38:30.408 -03:00 [INF] HTTP PUT /api/products/6ac2aa32-8512-4a8c-b0a4-6ce62150c1d2/price responded 204 in 37.7731 ms
2025-09-08 10:38:30.408 -03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5297/api/products/6ac2aa32-8512-4a8c-b0a4-6ce62150c1d2/price - 204 null null 38.41ms
2025-09-08 10:39:39.889 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/signup - application/json 111
2025-09-08 10:39:39.889 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:39:39.891 -03:00 [INF] Route matched with {action = "SignUp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignUp(SignUpRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:39:39.930 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Customers" ("Id", "Email", "Nome")
VALUES (@p0, @p1, @p2);
INSERT INTO "Users" ("Id", "CustomerId", "Email", "PasswordHash", "Type", "UserName")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8);
2025-09-08 10:39:39.943 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 10:39:39.943 -03:00 [INF] Executed action API.Controllers.AuthController.SignUp (Api) in 51.3884ms
2025-09-08 10:39:39.943 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:39:39.943 -03:00 [INF] HTTP POST /api/auth/signup responded 200 in 53.6405 ms
2025-09-08 10:39:39.943 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/signup - 200 null application/json; charset=utf-8 54.5425ms
2025-09-08 10:39:56.381 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/index.html - null null
2025-09-08 10:39:56.416 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/index.html - 200 null text/html;charset=utf-8 34.2149ms
2025-09-08 10:39:56.575 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 10:39:56.580 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/favicon-32x32.png - null null
2025-09-08 10:39:56.584 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.8484ms
2025-09-08 10:39:56.585 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/favicon-32x32.png - 200 628 image/png 4.638ms
2025-09-08 10:40:36.831 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/signup - application/json 111
2025-09-08 10:40:36.831 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:40:36.831 -03:00 [INF] Route matched with {action = "SignUp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignUp(SignUpRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:40:36.858 -03:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Customers" ("Id", "Email", "Nome")
VALUES (@p0, @p1, @p2);
INSERT INTO "Users" ("Id", "CustomerId", "Email", "PasswordHash", "Type", "UserName")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8);
2025-09-08 10:40:36.875 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Customers_Email"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Customers_Email"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Customers
    ConstraintName: IX_Customers_Email
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Customers_Email"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Customers_Email"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Customers
    ConstraintName: IX_Customers_Email
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-08 10:40:36.881 -03:00 [INF] Executed action API.Controllers.AuthController.SignUp (Api) in 49.5766ms
2025-09-08 10:40:36.881 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:40:36.881 -03:00 [ERR] HTTP POST /api/auth/signup responded 500 in 50.1647 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Customers_Email"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Customers_Email"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Customers
    ConstraintName: IX_Customers_Email
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 62
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 70
   at API.Controllers.AuthController.SignUp(SignUpRequest req, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AuthController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 10:40:36.886 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Customers_Email"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Customers_Email"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Customers
    ConstraintName: IX_Customers_Email
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 62
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 70
   at API.Controllers.AuthController.SignUp(SignUpRequest req, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AuthController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 10:40:36.890 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/signup - 500 null text/plain; charset=utf-8 59.2884ms
2025-09-08 10:40:59.845 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/signup - application/json 113
2025-09-08 10:40:59.845 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:40:59.846 -03:00 [INF] Route matched with {action = "SignUp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignUp(SignUpRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:40:59.861 -03:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Customers" ("Id", "Email", "Nome")
VALUES (@p0, @p1, @p2);
INSERT INTO "Users" ("Id", "CustomerId", "Email", "PasswordHash", "Type", "UserName")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8);
2025-09-08 10:40:59.866 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_UserName"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_UserName"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_UserName
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_UserName"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_UserName"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_UserName
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-08 10:40:59.869 -03:00 [INF] Executed action API.Controllers.AuthController.SignUp (Api) in 23.1705ms
2025-09-08 10:40:59.869 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:40:59.869 -03:00 [ERR] HTTP POST /api/auth/signup responded 500 in 23.7822 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_UserName"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_UserName"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_UserName
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 62
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 70
   at API.Controllers.AuthController.SignUp(SignUpRequest req, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AuthController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 10:40:59.871 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_UserName"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_UserName"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_UserName
    File: nbtinsert.c
    Line: 666
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 62
   at Infrastructure.Identity.AuthService.SignUpAsync(String nome, String email, String username, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 70
   at API.Controllers.AuthController.SignUp(SignUpRequest req, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AuthController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 10:40:59.874 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/signup - 500 null text/plain; charset=utf-8 29.0538ms
2025-09-08 10:41:10.778 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/signup - application/json 115
2025-09-08 10:41:10.778 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:41:10.778 -03:00 [INF] Route matched with {action = "SignUp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignUp(SignUpRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:41:10.782 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Customers" ("Id", "Email", "Nome")
VALUES (@p0, @p1, @p2);
INSERT INTO "Users" ("Id", "CustomerId", "Email", "PasswordHash", "Type", "UserName")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8);
2025-09-08 10:41:10.786 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 10:41:10.786 -03:00 [INF] Executed action API.Controllers.AuthController.SignUp (Api) in 7.5601ms
2025-09-08 10:41:10.786 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:41:10.786 -03:00 [INF] HTTP POST /api/auth/signup responded 200 in 7.9865 ms
2025-09-08 10:41:10.786 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/signup - 200 null application/json; charset=utf-8 8.3017ms
2025-09-08 10:41:57.621 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 64
2025-09-08 10:41:57.621 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 10:41:57.621 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:41:57.627 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 10:41:57.630 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 10:41:57.630 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 10:41:57.630 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 8.5813ms
2025-09-08 10:41:57.630 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 10:41:57.630 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 8.9498 ms
2025-09-08 10:41:57.630 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 9.2867ms
2025-09-08 10:43:04.323 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 10:43:04.326 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (CLIENTE)
2025-09-08 10:43:04.328 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-08 10:43:04.328 -03:00 [INF] HTTP POST /api/orders responded 401 in 5.0317 ms
2025-09-08 10:43:04.328 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 401 0 null 5.3495ms
2025-09-08 10:43:40.761 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 10:43:40.763 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 10:43:40.765 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 10:43:40.783 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 10:43:40.784 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 18.8559ms
2025-09-08 10:43:40.784 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 10:43:40.784 -03:00 [ERR] HTTP POST /api/orders responded 500 in 22.5988 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 10:43:40.785 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 10:43:40.786 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 24.4493ms
2025-09-08 10:44:03.910 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 132
2025-09-08 10:44:03.911 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 10:44:03.911 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 10:44:03.915 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 10:44:03.916 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 4.0142ms
2025-09-08 10:44:03.916 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 10:44:03.916 -03:00 [ERR] HTTP POST /api/orders responded 500 in 4.9534 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 10:44:03.916 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 10:44:03.917 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 7.1067ms
2025-09-08 10:48:24.281 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 10:48:24.295 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 14.0133ms
2025-09-08 10:49:09.333 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/signup - application/json 98
2025-09-08 10:49:09.333 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:49:09.333 -03:00 [INF] Route matched with {action = "SignUp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignUp(SignUpRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:49:09.350 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Customers" ("Id", "Email", "Nome")
VALUES (@p0, @p1, @p2);
INSERT INTO "Users" ("Id", "CustomerId", "Email", "PasswordHash", "Type", "UserName")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8);
2025-09-08 10:49:09.356 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 10:49:09.357 -03:00 [INF] Executed action API.Controllers.AuthController.SignUp (Api) in 23.3724ms
2025-09-08 10:49:09.357 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:49:09.357 -03:00 [INF] HTTP POST /api/auth/signup responded 200 in 23.6373 ms
2025-09-08 10:49:09.357 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/signup - 200 null application/json; charset=utf-8 23.9237ms
2025-09-08 10:49:53.026 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 54
2025-09-08 10:49:53.026 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 10:49:53.026 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:49:53.030 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 10:49:53.032 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 10:49:53.032 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 10:49:53.032 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 5.9893ms
2025-09-08 10:49:53.032 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 10:49:53.033 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 6.5525 ms
2025-09-08 10:49:53.033 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 7.0001ms
2025-09-08 10:50:42.993 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 131
2025-09-08 10:50:42.993 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 10:50:42.994 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 10:50:42.999 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 10:50:42.999 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 5.5497ms
2025-09-08 10:50:42.999 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 10:50:43.000 -03:00 [ERR] HTTP POST /api/orders responded 500 in 6.6308 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 10:50:43.000 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 10:50:43.001 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 8.6559ms
2025-09-08 10:56:04.807 -03:00 [INF] User profile is available. Using 'C:\Users\OBERDAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 10:56:04.894 -03:00 [INF] Now listening on: http://localhost:5297
2025-09-08 10:56:04.895 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 10:56:04.895 -03:00 [INF] Hosting environment: Development
2025-09-08 10:56:04.895 -03:00 [INF] Content root path: C:\Users\OBERDAN\Desktop\DESAFIO1\src\API
2025-09-08 10:56:11.509 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 10:56:11.618 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.7508ms
2025-09-08 10:56:46.045 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/signup - application/json 101
2025-09-08 10:56:46.052 -03:00 [WRN] Failed to determine the https port for redirect.
2025-09-08 10:56:46.071 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:56:46.083 -03:00 [INF] Route matched with {action = "SignUp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignUp(SignUpRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:56:46.494 -03:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-08 10:56:46.860 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?', @p6='?', @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Customers" ("Id", "Email", "Nome")
VALUES (@p0, @p1, @p2);
INSERT INTO "Users" ("Id", "CustomerId", "Email", "PasswordHash", "Type", "UserName")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8);
2025-09-08 10:56:46.898 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 10:56:46.905 -03:00 [INF] Executed action API.Controllers.AuthController.SignUp (Api) in 819.8695ms
2025-09-08 10:56:46.905 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.SignUp (Api)'
2025-09-08 10:56:46.907 -03:00 [INF] HTTP POST /api/auth/signup responded 200 in 855.3809 ms
2025-09-08 10:56:46.914 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/signup - 200 null application/json; charset=utf-8 868.522ms
2025-09-08 10:57:19.001 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 53
2025-09-08 10:57:19.004 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 10:57:19.007 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:57:19.243 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 10:57:19.246 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 238.0978ms
2025-09-08 10:57:19.246 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 10:57:19.246 -03:00 [ERR] HTTP POST /api/auth/login responded 500 in 243.3323 ms
Common.DomainException: Credenciais inválidas.
   at Infrastructure.Identity.AuthService.LoginAsync(String usernameOrEmail, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 85
   at API.Controllers.AuthController.Login(LoginRequest req, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AuthController.cs:line 42
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 10:57:19.256 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Credenciais inválidas.
   at Infrastructure.Identity.AuthService.LoginAsync(String usernameOrEmail, String senha, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Infrastructure\Identity\AuthService.cs:line 85
   at API.Controllers.AuthController.Login(LoginRequest req, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\AuthController.cs:line 42
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 10:57:19.258 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 500 null text/plain; charset=utf-8 256.8122ms
2025-09-08 10:57:28.945 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 55
2025-09-08 10:57:28.947 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 10:57:28.947 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 10:57:28.990 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 10:57:29.001 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 10:57:29.002 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 10:57:29.002 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 54.3948ms
2025-09-08 10:57:29.002 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 10:57:29.002 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 56.4652 ms
2025-09-08 10:57:29.002 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 56.8986ms
2025-09-08 10:58:36.699 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 128
2025-09-08 10:58:36.728 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 10:58:36.730 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 10:58:36.745 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 10:58:36.746 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 16.4089ms
2025-09-08 10:58:36.746 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 10:58:36.746 -03:00 [ERR] HTTP POST /api/orders responded 500 in 46.7116 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 10:58:36.747 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 10:58:36.748 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 48.9039ms
2025-09-08 11:00:46.832 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/dev/seed-admin - null 0
2025-09-08 11:00:46.834 -03:00 [INF] Executing endpoint 'API.Controllers.AdminSeedController.Seed (Api)'
2025-09-08 11:00:46.836 -03:00 [INF] Route matched with {action = "Seed", controller = "AdminSeed"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Seed(System.Threading.CancellationToken) on controller API.Controllers.AdminSeedController (Api).
2025-09-08 11:00:46.844 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-09-08 11:00:46.846 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 11:00:46.848 -03:00 [INF] Executed action API.Controllers.AdminSeedController.Seed (Api) in 11.8821ms
2025-09-08 11:00:46.848 -03:00 [INF] Executed endpoint 'API.Controllers.AdminSeedController.Seed (Api)'
2025-09-08 11:00:46.848 -03:00 [INF] HTTP POST /dev/seed-admin responded 200 in 14.8417 ms
2025-09-08 11:00:46.848 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/dev/seed-admin - 200 null application/json; charset=utf-8 16.0731ms
2025-09-08 11:01:30.514 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 49
2025-09-08 11:01:30.515 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 11:01:30.515 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 11:01:30.518 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-08 11:01:30.531 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 15.903ms
2025-09-08 11:01:30.531 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 11:01:30.531 -03:00 [INF] HTTP POST /api/auth/login responded 400 in 16.6506 ms
2025-09-08 11:01:30.531 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 400 null application/problem+json; charset=utf-8 17.0544ms
2025-09-08 11:01:37.896 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 55
2025-09-08 11:01:37.897 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 11:01:37.897 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 11:01:37.900 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 11:01:37.902 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 11:01:37.903 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 11:01:37.903 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 6.2862ms
2025-09-08 11:01:37.903 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 11:01:37.903 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 6.8396 ms
2025-09-08 11:01:37.904 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 7.1444ms
2025-09-08 11:02:18.464 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 55
2025-09-08 11:02:18.465 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 11:02:18.465 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 11:02:18.481 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 11:02:18.483 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 11:02:18.483 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 11:02:18.483 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 18.3531ms
2025-09-08 11:02:18.483 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 11:02:18.483 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 19.0201 ms
2025-09-08 11:02:18.483 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 19.3574ms
2025-09-08 11:02:55.114 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/products - application/json 60
2025-09-08 11:02:55.116 -03:00 [INF] Executing endpoint 'API.Controllers.ProductsController.Create (Api)'
2025-09-08 11:02:55.118 -03:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateProductRequest, System.Threading.CancellationToken) on controller API.Controllers.ProductsController (Api).
2025-09-08 11:02:55.149 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Products" ("Id", "Nome", "Preco", "QuantityAvailable")
VALUES (@p0, @p1, @p2, @p3);
2025-09-08 11:02:55.150 -03:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType3`1[[System.Guid, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 11:02:55.161 -03:00 [INF] Executed action API.Controllers.ProductsController.Create (Api) in 42.2747ms
2025-09-08 11:02:55.161 -03:00 [INF] Executed endpoint 'API.Controllers.ProductsController.Create (Api)'
2025-09-08 11:02:55.161 -03:00 [INF] HTTP POST /api/products responded 201 in 46.8099 ms
2025-09-08 11:02:55.161 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/products - 201 null application/json; charset=utf-8 47.0944ms
2025-09-08 11:04:25.125 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 55
2025-09-08 11:04:25.125 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 11:04:25.125 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 11:04:25.129 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 11:04:25.130 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 11:04:25.131 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 11:04:25.131 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 5.9888ms
2025-09-08 11:04:25.131 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 11:04:25.131 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 6.3724 ms
2025-09-08 11:04:25.132 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 6.6601ms
2025-09-08 11:05:31.315 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 132
2025-09-08 11:05:31.317 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 11:05:31.317 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 11:05:31.320 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 11:05:31.321 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 3.9877ms
2025-09-08 11:05:31.321 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 11:05:31.321 -03:00 [ERR] HTTP POST /api/orders responded 500 in 5.8237 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 11:05:31.321 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 11:05:31.322 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 7.4207ms
2025-09-08 14:19:09.329 -03:00 [INF] User profile is available. Using 'C:\Users\OBERDAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 14:19:09.408 -03:00 [INF] Now listening on: http://localhost:5297
2025-09-08 14:19:09.410 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 14:19:09.410 -03:00 [INF] Hosting environment: Development
2025-09-08 14:19:09.410 -03:00 [INF] Content root path: C:\Users\OBERDAN\Desktop\DESAFIO1\src\API
2025-09-08 14:19:25.178 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 14:19:25.309 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 132.1789ms
2025-09-08 14:20:05.818 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 62
2025-09-08 14:20:05.825 -03:00 [WRN] Failed to determine the https port for redirect.
2025-09-08 14:20:05.843 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 14:20:05.854 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 14:20:06.231 -03:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-08 14:20:06.633 -03:00 [INF] Executed DbCommand (33ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 14:20:06.659 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 14:20:06.679 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 14:20:06.685 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 828.8807ms
2025-09-08 14:20:06.685 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 14:20:06.687 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 862.6772 ms
2025-09-08 14:20:06.695 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 877.1211ms
2025-09-08 14:21:13.680 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 132
2025-09-08 14:21:13.708 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:21:13.711 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:21:13.758 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:21:13.759 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 48.3233ms
2025-09-08 14:21:13.759 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:21:13.760 -03:00 [ERR] HTTP POST /api/orders responded 500 in 78.1916 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:21:13.769 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:21:13.773 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 93.0512ms
2025-09-08 14:22:01.351 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 132
2025-09-08 14:22:01.355 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:22:01.355 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:22:01.373 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:22:01.374 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 18.7151ms
2025-09-08 14:22:01.374 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:22:01.374 -03:00 [ERR] HTTP POST /api/orders responded 500 in 21.5398 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:22:01.374 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:22:01.375 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 23.5913ms
2025-09-08 14:22:07.605 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:22:07.607 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:22:07.607 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:22:07.612 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:22:07.612 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 5.1931ms
2025-09-08 14:22:07.612 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:22:07.612 -03:00 [ERR] HTTP POST /api/orders responded 500 in 6.9260 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:22:07.613 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:22:07.613 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 8.5213ms
2025-09-08 14:26:57.017 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/api/Customers?search=ba3158cc-5d7f-41ca-8394-933a26f9823b - null null
2025-09-08 14:26:57.018 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (ADMIN)
2025-09-08 14:26:57.021 -03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 14:26:57.021 -03:00 [INF] HTTP GET /api/Customers responded 403 in 3.4658 ms
2025-09-08 14:26:57.021 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/api/Customers?search=ba3158cc-5d7f-41ca-8394-933a26f9823b - 403 0 null 4.3453ms
2025-09-08 14:27:03.350 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/api/Customers?search=ba3158cc-5d7f-41ca-8394-933a26f9823b - null null
2025-09-08 14:27:03.351 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (ADMIN)
2025-09-08 14:27:03.351 -03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 14:27:03.351 -03:00 [INF] HTTP GET /api/Customers responded 403 in 0.7416 ms
2025-09-08 14:27:03.351 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/api/Customers?search=ba3158cc-5d7f-41ca-8394-933a26f9823b - 403 0 null 1.2308ms
2025-09-08 14:27:26.672 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/api/Customers?search=ba3158cc-5d7f-41ca-8394-933a26f9823b - null null
2025-09-08 14:27:26.672 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (ADMIN)
2025-09-08 14:27:26.673 -03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-09-08 14:27:26.673 -03:00 [INF] HTTP GET /api/Customers responded 403 in 0.6647 ms
2025-09-08 14:27:26.673 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/api/Customers?search=ba3158cc-5d7f-41ca-8394-933a26f9823b - 403 0 null 1.0181ms
2025-09-08 14:29:14.426 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/api/Customers/ba3158cc-5d7f-41ca-8394-933a26f9823b - null null
2025-09-08 14:29:14.427 -03:00 [INF] Executing endpoint 'API.Controllers.CustomersController.GetById (Api)'
2025-09-08 14:29:14.429 -03:00 [INF] Route matched with {action = "GetById", controller = "Customers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Controllers.CustomersController+CustomerResponse]] GetById(System.Guid, System.Threading.CancellationToken) on controller API.Controllers.CustomersController (Api).
2025-09-08 14:29:14.456 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:29:14.457 -03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-09-08 14:29:14.468 -03:00 [INF] Executed action API.Controllers.CustomersController.GetById (Api) in 38.801ms
2025-09-08 14:29:14.469 -03:00 [INF] Executed endpoint 'API.Controllers.CustomersController.GetById (Api)'
2025-09-08 14:29:14.469 -03:00 [INF] HTTP GET /api/Customers/ba3158cc-5d7f-41ca-8394-933a26f9823b responded 404 in 42.5738 ms
2025-09-08 14:29:14.469 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/api/Customers/ba3158cc-5d7f-41ca-8394-933a26f9823b - 404 null application/problem+json; charset=utf-8 43.0444ms
2025-09-08 14:30:43.263 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:30:43.263 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:30:43.264 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:30:43.268 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:30:43.269 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 5.4935ms
2025-09-08 14:30:43.269 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:30:43.270 -03:00 [ERR] HTTP POST /api/orders responded 500 in 6.5470 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:30:43.271 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:30:43.272 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 9.5696ms
2025-09-08 14:34:57.698 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/api/Customers/73a2438a-25c9-4fc5-a3f0-f84024285725 - null null
2025-09-08 14:34:57.698 -03:00 [INF] Executing endpoint 'API.Controllers.CustomersController.GetById (Api)'
2025-09-08 14:34:57.699 -03:00 [INF] Route matched with {action = "GetById", controller = "Customers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[API.Controllers.CustomersController+CustomerResponse]] GetById(System.Guid, System.Threading.CancellationToken) on controller API.Controllers.CustomersController (Api).
2025-09-08 14:34:57.713 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:34:57.714 -03:00 [INF] Executing OkObjectResult, writing value of type 'API.Controllers.CustomersController+CustomerResponse'.
2025-09-08 14:34:57.716 -03:00 [INF] Executed action API.Controllers.CustomersController.GetById (Api) in 17.586ms
2025-09-08 14:34:57.716 -03:00 [INF] Executed endpoint 'API.Controllers.CustomersController.GetById (Api)'
2025-09-08 14:34:57.716 -03:00 [INF] HTTP GET /api/Customers/73a2438a-25c9-4fc5-a3f0-f84024285725 responded 200 in 18.2057 ms
2025-09-08 14:34:57.716 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/api/Customers/73a2438a-25c9-4fc5-a3f0-f84024285725 - 200 null application/json; charset=utf-8 18.5708ms
2025-09-08 14:37:45.608 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/dev/seed-admin - null 0
2025-09-08 14:37:45.609 -03:00 [INF] Executing endpoint 'API.Controllers.AdminSeedController.Seed (Api)'
2025-09-08 14:37:45.611 -03:00 [INF] Route matched with {action = "Seed", controller = "AdminSeed"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Seed(System.Threading.CancellationToken) on controller API.Controllers.AdminSeedController (Api).
2025-09-08 14:37:45.626 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-09-08 14:37:45.654 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`4[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 14:37:45.655 -03:00 [INF] Executed action API.Controllers.AdminSeedController.Seed (Api) in 43.7373ms
2025-09-08 14:37:45.655 -03:00 [INF] Executed endpoint 'API.Controllers.AdminSeedController.Seed (Api)'
2025-09-08 14:37:45.655 -03:00 [INF] HTTP POST /dev/seed-admin responded 200 in 46.2500 ms
2025-09-08 14:37:45.655 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/dev/seed-admin - 200 null application/json; charset=utf-8 46.913ms
2025-09-08 14:38:43.757 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 55
2025-09-08 14:38:43.759 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 14:38:43.759 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 14:38:43.763 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 14:38:43.765 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 14:38:43.765 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 14:38:43.765 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 6.5159ms
2025-09-08 14:38:43.765 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 14:38:43.765 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 6.9101 ms
2025-09-08 14:38:43.765 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 8.1151ms
2025-09-08 14:38:51.126 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 55
2025-09-08 14:38:51.126 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 14:38:51.126 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 14:38:51.130 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 14:38:51.132 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 14:38:51.132 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 14:38:51.133 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 6.0758ms
2025-09-08 14:38:51.133 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 14:38:51.133 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 6.3949 ms
2025-09-08 14:38:51.133 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 6.6781ms
2025-09-08 14:39:57.683 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/products - application/json 64
2025-09-08 14:39:57.683 -03:00 [INF] Executing endpoint 'API.Controllers.ProductsController.Create (Api)'
2025-09-08 14:39:57.686 -03:00 [INF] Route matched with {action = "Create", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateProductRequest, System.Threading.CancellationToken) on controller API.Controllers.ProductsController (Api).
2025-09-08 14:39:57.769 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Products" ("Id", "Nome", "Preco", "QuantityAvailable")
VALUES (@p0, @p1, @p2, @p3);
2025-09-08 14:39:57.775 -03:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType3`1[[System.Guid, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 14:39:57.784 -03:00 [INF] Executed action API.Controllers.ProductsController.Create (Api) in 97.643ms
2025-09-08 14:39:57.784 -03:00 [INF] Executed endpoint 'API.Controllers.ProductsController.Create (Api)'
2025-09-08 14:39:57.784 -03:00 [INF] HTTP POST /api/products responded 201 in 101.1568 ms
2025-09-08 14:39:57.784 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/products - 201 null application/json; charset=utf-8 101.4505ms
2025-09-08 14:41:07.395 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 62
2025-09-08 14:41:07.395 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 14:41:07.395 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 14:41:07.409 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 14:41:07.411 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 14:41:07.411 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 14:41:07.411 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 15.9302ms
2025-09-08 14:41:07.411 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 14:41:07.411 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 16.2018 ms
2025-09-08 14:41:07.411 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 16.5077ms
2025-09-08 14:42:16.637 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 132
2025-09-08 14:42:16.638 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:16.638 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:16.641 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:16.641 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 3.6183ms
2025-09-08 14:42:16.642 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:16.642 -03:00 [ERR] HTTP POST /api/orders responded 500 in 4.5862 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:16.643 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:16.644 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 7.1176ms
2025-09-08 14:42:28.336 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:28.336 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:28.337 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:28.340 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:28.340 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 3.0896ms
2025-09-08 14:42:28.340 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:28.340 -03:00 [ERR] HTTP POST /api/orders responded 500 in 4.2968 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:28.341 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:28.342 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 6.3527ms
2025-09-08 14:42:29.290 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:29.291 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:29.291 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:29.293 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:29.294 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 2.7977ms
2025-09-08 14:42:29.294 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:29.294 -03:00 [ERR] HTTP POST /api/orders responded 500 in 3.2454 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:29.294 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:29.295 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 4.5826ms
2025-09-08 14:42:30.011 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:30.011 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:30.011 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:30.014 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:30.014 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 2.9618ms
2025-09-08 14:42:30.014 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:30.014 -03:00 [ERR] HTTP POST /api/orders responded 500 in 3.4833 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:30.015 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:30.016 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 5.1571ms
2025-09-08 14:42:30.511 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:30.512 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:30.512 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:30.515 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:30.515 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 2.9566ms
2025-09-08 14:42:30.515 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:30.515 -03:00 [ERR] HTTP POST /api/orders responded 500 in 3.6970 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:30.515 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:30.516 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 4.898ms
2025-09-08 14:42:30.722 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:30.723 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:30.723 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:30.726 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:30.726 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 2.6804ms
2025-09-08 14:42:30.726 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:30.726 -03:00 [ERR] HTTP POST /api/orders responded 500 in 3.3255 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:30.726 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:30.727 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 4.3875ms
2025-09-08 14:42:30.893 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:30.894 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:30.894 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:30.897 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:30.898 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 3.5236ms
2025-09-08 14:42:30.898 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:30.898 -03:00 [ERR] HTTP POST /api/orders responded 500 in 4.4554 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:30.898 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:30.900 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 6.3213ms
2025-09-08 14:42:31.050 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:31.051 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:31.051 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:31.053 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:31.054 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 2.9017ms
2025-09-08 14:42:31.054 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:31.054 -03:00 [ERR] HTTP POST /api/orders responded 500 in 3.4453 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:31.054 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:31.055 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 4.5128ms
2025-09-08 14:42:31.210 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:31.211 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:31.211 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:31.214 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:31.214 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 2.9888ms
2025-09-08 14:42:31.214 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:31.214 -03:00 [ERR] HTTP POST /api/orders responded 500 in 3.5919 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:31.214 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:31.222 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 11.8134ms
2025-09-08 14:42:31.371 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:31.371 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:31.372 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:31.374 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:31.374 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 2.4942ms
2025-09-08 14:42:31.374 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:31.374 -03:00 [ERR] HTTP POST /api/orders responded 500 in 2.9271 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:31.374 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:31.375 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 3.8355ms
2025-09-08 14:42:31.523 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:31.523 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:31.523 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:31.525 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:31.526 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 2.4066ms
2025-09-08 14:42:31.526 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:31.526 -03:00 [ERR] HTTP POST /api/orders responded 500 in 2.8930 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:31.526 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:31.526 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 3.7858ms
2025-09-08 14:42:31.675 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/orders - application/json 133
2025-09-08 14:42:31.676 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:31.676 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 14:42:31.678 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 14:42:31.678 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 2.6836ms
2025-09-08 14:42:31.678 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 14:42:31.678 -03:00 [ERR] HTTP POST /api/orders responded 500 in 3.1651 ms
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-09-08 14:42:31.679 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Common.DomainException: Cliente inválido.
   at Application.Services.OrderService.CreateOrderAsync(CreateOrderRequest request, Guid customerId, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\Application\Services\OrderService.cs:line 51
   at API.Controllers.OrdersController.Create(CreateOrderRequestDto dto, CancellationToken ct) in C:\Users\OBERDAN\Desktop\DESAFIO1\src\API\Controllers\OrdersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-08 14:42:31.679 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/orders - 500 null text/plain; charset=utf-8 4.1514ms
2025-09-08 15:12:35.131 -03:00 [INF] User profile is available. Using 'C:\Users\OBERDAN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-08 15:12:35.197 -03:00 [INF] Now listening on: http://localhost:5297
2025-09-08 15:12:35.198 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-08 15:12:35.198 -03:00 [INF] Hosting environment: Development
2025-09-08 15:12:35.198 -03:00 [INF] Content root path: C:\Users\OBERDAN\Desktop\DESAFIO1\src\API
2025-09-08 15:12:42.063 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - null null
2025-09-08 15:12:42.180 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5297/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 117.5154ms
2025-09-08 15:12:58.198 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/auth/login - application/json 63
2025-09-08 15:12:58.205 -03:00 [WRN] Failed to determine the https port for redirect.
2025-09-08 15:12:58.222 -03:00 [INF] Executing endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 15:12:58.232 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest, System.Threading.CancellationToken) on controller API.Controllers.AuthController (Api).
2025-09-08 15:12:58.606 -03:00 [WRN] The foreign key property 'Order.CustomerId1' was created in shadow state because a conflicting property with the simple name 'CustomerId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-08 15:12:58.993 -03:00 [INF] Executed DbCommand (31ms) [Parameters=[@__usernameOrEmail_0='?', @__usernameOrEmail_0_1='?', @__hash_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CustomerId", u."Email", u."PasswordHash", u."Type", u."UserName"
FROM "Users" AS u
WHERE (u."Email" = @__usernameOrEmail_0 OR u."UserName" = @__usernameOrEmail_0_1) AND u."PasswordHash" = @__hash_1
LIMIT 1
2025-09-08 15:12:59.017 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_CustomerId_Value_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__user_CustomerId_Value_0
LIMIT 1
2025-09-08 15:12:59.032 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 15:12:59.038 -03:00 [INF] Executed action API.Controllers.AuthController.Login (Api) in 803.4734ms
2025-09-08 15:12:59.038 -03:00 [INF] Executed endpoint 'API.Controllers.AuthController.Login (Api)'
2025-09-08 15:12:59.040 -03:00 [INF] HTTP POST /api/auth/login responded 200 in 835.9139 ms
2025-09-08 15:12:59.047 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/auth/login - 200 null application/json; charset=utf-8 849.2267ms
2025-09-08 15:13:50.253 -03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5297/api/Orders - application/json 128
2025-09-08 15:13:50.285 -03:00 [INF] Executing endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 15:13:50.289 -03:00 [INF] Route matched with {action = "Create", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(API.Controllers.CreateOrderRequestDto, System.Threading.CancellationToken) on controller API.Controllers.OrdersController (Api).
2025-09-08 15:13:50.337 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Email", c."Nome"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-09-08 15:13:50.344 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Nome", p."Preco", p."QuantityAvailable"
FROM "Products" AS p
WHERE p."Id" = @__id_0
LIMIT 1
2025-09-08 15:13:50.493 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = Decimal), @p6='?' (DbType = Guid), @p7='?' (DbType = Int32), @p8='?', @p12='?' (DbType = Guid), @p9='?', @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Orders" ("Id", "CustomerId", "CustomerId1", "DataPedido", "EnderecoEntrega", "Preco", "ProductId", "Quantidade", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
UPDATE "Products" SET "Nome" = @p9, "Preco" = @p10, "QuantityAvailable" = @p11
WHERE "Id" = @p12;
2025-09-08 15:13:50.510 -03:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType3`1[[System.Guid, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-08 15:13:50.512 -03:00 [INF] Executed action API.Controllers.OrdersController.Create (Api) in 223.0185ms
2025-09-08 15:13:50.512 -03:00 [INF] Executed endpoint 'API.Controllers.OrdersController.Create (Api)'
2025-09-08 15:13:50.512 -03:00 [INF] HTTP POST /api/Orders responded 201 in 257.8334 ms
2025-09-08 15:13:50.513 -03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5297/api/Orders - 201 null application/json; charset=utf-8 259.6412ms
